#include <stdio.h>
#define MAX 80
int stack[MAX];
int top=-1;
void push(int);
int pop ();

int main()
{
	printf("Enter SIZE : ");
	int n;
	scanf("%d",&n);
	int a[n];
	int i;
	printf("\nEnter elements (one-by-one) : ");
	for(i=0;i<n;i++)
	scanf("%d",&a[i]);
	
	void quickSort(int [],int,int);
//	int partion(int [], int,int);
	quickSort(a,0,n-1);
	
	printf("\nSorted : ");
	for(i=0;i<n;i++)
	printf("%d ",a[i]);
	return 0;
}

void quickSort(int a[], int l, int h)
{
	int p,partition(int [], int,int);
	
	push(l);
	push(h);
		while(top != -1)
		{
			
			h=pop();
			l=pop();
			
			if((h-l)>=1)
			{
				p=partition(a,l,h);
				if(p-1 > l)
				{
					push(l);
					push(p-1);
				}
				if (p+1 <h)
				{
					push(p+1);
					push(h);
				}
			}
		}
		//quickSort(a,l,p-1);
		//quickSort(a,p+1,h);
}

int partition(int a[], int l, int h)
{
	int pivotele=a[l],t;
	int lo = l,hi=h;
	while(lo<hi)
	{
		while(a[lo]<=pivotele)
		lo++;
		
		while(a[hi]>pivotele)
		hi--;
		
		if(lo<hi)
		{
			t=a[lo];
			a[lo]=a[hi];
			a[hi]=t;
		}
	}
	
	a[l]=a[hi];
	a[hi]=pivotele;
	return hi;
}

void push(int x)
{
	++top;
	stack[top]=x;
}

int pop()
{
	int x;
	x=stack[top];
		top--;
	return x;
}
